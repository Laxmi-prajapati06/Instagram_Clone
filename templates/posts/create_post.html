{% extends 'base.html' %}
{% load static %}

{% block title %}Create Post - Instagram Clone{% endblock %}

{% block content %}
<div class="create-post-container">
    <div class="create-post-card">
        <div class="create-post-header">
            <h2><i class="fas fa-camera"></i> Create New Post</h2>
        </div>
        
        <div class="create-post-content">
            <form method="post" enctype="multipart/form-data" id="post-form">
                {% csrf_token %}
                
                
                <div class="form-group">
                    <label class="form-label">Select Image</label>
                    <input type="file" name="image" accept="image/*" required class="form-control"
                           onchange="previewImage(this)">
                    <small class="text-muted">Select an image from folder</small>
                </div>
                
                
                <div class="image-preview-container" id="image-preview" style="display: none; margin-bottom: 20px;">
                    <img id="preview" src="" alt="Preview" style="max-width: 100%; max-height: 300px; border-radius: 10px;">
                </div>
                
                
                <div class="form-group">
                    <label class="form-label">Caption</label>
                    <textarea name="caption" rows="4" class="form-control" placeholder="Write a caption..."></textarea>
                </div>
                
                
                <div class="create-post-actions">
                    <a href="{% url 'home_feed' %}" class="btn btn-secondary">Cancel</a>
                    <button type="submit" class="btn">Share Post</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Simple image preview
    function previewImage(input) {
        const preview = document.getElementById('preview');
        const previewContainer = document.getElementById('image-preview');
        
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                preview.src = e.target.result;
                previewContainer.style.display = 'block';
            }
            
            reader.readAsDataURL(input.files[0]);
        } else {
            previewContainer.style.display = 'none';
        }
    }
</script>
{% endblock %}